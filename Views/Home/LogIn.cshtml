
@model MMIv3.Models.UserAction
@{
    WebImage photo = null;
    var newFileName = "";
    var imagePath = "";
    var action = 0;

    if (IsPost)
    {
        photo = WebImage.GetImageFromRequest();
        if (photo != null)
        {
            newFileName = Guid.NewGuid().ToString() + "_" +
                Path.GetFileName(photo.FileName);
            imagePath = @"images\" + newFileName;

            photo.Save(@"~\" + imagePath);
            action = 1;
            Model.action = action;
            Model.url = imagePath;

        }
    }
}

<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>
<body>
    <div class="profile_page_mycontainer">
        <div class="profile_page_leftmenu">
            <div class="leftmenu_elipsas">
                @foreach (MMIv3.Models.Friend friend2 in Model.lastthree)
                {
                    <div class="elipsa" style="background-image:Url(@friend2.avatar )"></div> <div class="name"><p>@friend2.Name</p></div>
                }
            </div>
        </div>
        <div class="profile_page_middlemenu">
            <div class="middlemenu_baner">
                <img src="~/images/koya.svg" style="float: left; width:7vw; height: 7vh;" />
                <input type="text" placeholder="Search tags in profile" style="float: left;" />
                <div class="color_switch_div">
                    <span class="material-symbols-outlined">dark_mode</span>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider round"></span>
                    </label>
                    <span class="material-symbols-outlined" style="float: right;">light_mode</span>
                </div>
            </div>
            <div class="profile_break" style="width: 100%; height: 40px; background-color: #4B4E6D; clear: both;"></div>
            <div class="profile_info">
                <div class="profileicon_elipsa">
                    <img src="~/images/basic.jpg" style="width: 100%; height: 100%; border-radius: 50%;" /><br />
                    <h1 class="profile_name" style="text-align: center;">Begula</h1>
                </div>
            </div>
            <div class="profile_aboutme">
                <h1>About me...</h1>
            </div>
            <div class="profile_posts">
                <h1>Posts...</h1>
            </div>
        </div>
        <div class="profile_page_rightmenu">
            <div class="profile_friends_list" id="profile_friends_list">
                <p style="float: left;">Friends list:</p>
                <a class="page_link" style="float: right; color: #90EE90; text-decoration: none;"><div class="div_button" onclick="Show_Input();"><span class="material-symbols-outlined">add</span><p>Add new</p></div></a>
                <br style="clear: both;" />
                <div class="profile_sendreq" id="profile_sendreq">
                    <form action="/Home/LogIn" role="form" method="post">
                        <label class="col-form-label" for="sendreqname">Add Friend:</label><input id="sendreqname" name="sendreqname" type="text" class="form-control" />
                        <label class="col-form-label" for="action"></label><input id="action" name="action" type="hidden" class="form-control" value="2" />
                        <label class="col-form-label" for="id"></label><input id="id" name="id" type="hidden" class="form-control" value="@Model.id" />
                        <input type="submit" value="Send Request" class="send_request_button" />
                    </form>
                </div>
                @foreach (MMIv3.Models.Friend friend in Model.Friendlist)
                {
                    <div class="friend">
                        <div class="elipsa" style="background-image:Url(@friend.avatar )"></div> <div class="name"><p>@friend.Name</p></div>
                    </div>
                }
            </div>
            <div class="break_panel"></div>
            <div class="profile_friends_requests" id="profile_friends_requests">
                <p>Requests:</p>
                @foreach (MMIv3.Models.Friend friend1 in Model.WaitingReqlist)
                {
                    <div class="friend_request">
                        <div class="elipsa" style="background-image:Url(@friend1.avatar ); margin: 0;"></div> <div class="request_user_name"><p>@friend1.Name</p></div>
                        <form action="/Home/LogIn" role="form" method="post">
                            <label for="action"></label><input type="hidden" id="action" name="action" value="3" />
                            <label for="id"></label><input type="hidden" id="id" name="id" value="@Model.id" />
                            <label for="accepted"></label><input type="hidden" id="accepted" name="accepted" value="@friend1.Id" />
                            <input type="submit" value="Accept" class="accept_request_button"/>
                        </form>
                    </div>
                }
            </div>
            <div class="break_panel"></div>
            <div class="profile_user_controls">
                <a class="page_link"><div class="div_button"><span class="material-symbols-outlined">settings</span>@Html.ActionLink("Settings", "Settings", "Home", new { area = "" }, new { @class = "nav-link" })</div></a><br />
                <a class="page_link" style="color: #E99595; text-decoration: none;"><div class="div_button"><span class="material-symbols-outlined">logout</span>@Html.ActionLink("Log out", "Index", "Home", new { area = "" }, new { @class = "nav-link" })</div></a>
            </div>
        </div>
    </div>
</body>
<script>
    let x = 0;
    function Show_Input() {
        if (x == 0) {
            document.getElementById("profile_sendreq").style = 'display: block';
            document.getElementById("profile_friends_list").style = 'height: 50vh';
            document.getElementById("profile_friends_requests").style = 'height: 23vh';
            x++;
        }
        else {
            document.getElementById("profile_sendreq").style = 'display: none';
            document.getElementById("profile_friends_list").style = 'height: 43vh';
            document.getElementById("profile_friends_requests").style = 'height: 30vh';
            x--;
        }
    }
</script>